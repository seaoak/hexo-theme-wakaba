<%-
  partial('_partial/html-head', {
    lang: config.language,
    title: config.title,
    canonical: "./",
    stylesheets: theme.font.stylesheets,
    cssfile: "_css/styles.css"
  })
%>
<body class="hexo hexo-amp hexo-index">
  <header>
    <h1><a href="./"><%= config.title %></a></h1>
    <p><%= config.subtitle %></p>
  </header>
  <main>
    <% if (is_home()) { %>
    <ol>
    <%   page.posts.forEach(post => { %>
      <li>
        <h2><%= post.title %></h2>
        <% if (post.description) { %>
        <div class="description"><%- post.description %></div>
        <%   return;
           }
        %>
        <% if (post.excerpt) { %>
        <div class="excerpt"><%- post.excerpt %></div>
        <%   return;
           }
        %>
        <% if (post.content) { %>
        <div class="content"><%- post.content %></div>
        <%   return;
           }
        %>
        <div class="unknown"><p>UNEXPECTED !!</p></div>
      </li>
    <%   }); %>
    </ol>
    <% } else { %>
    <p>This is a body.</p>
    <% } %>
  </main>
  <nav>
    <ol>
      <% theme.nav.forEach(item => { %>
      <%   if (! item) return; %>
      <%   if (item.type === 'home') { %>
      <li><a href="<%- url_for('/') %>" class="fa-home"><%= _p('home') %></a></li>
      <%     return;
           }
      %>
      <%   if (item.type === 'archive') { %>
      <li><a href="<%- url_for(config.archive_dir + '/') %>" class="fa-fei"><%= _p('archives') %></a></li>
      <%     return;
           }
      %>
      <%   if (item.type === 'category') { %>
      <li><a href="<%- url_for(config.category_dir + '/') %>" class="fa-gui"><%= _p('categories') %></a></li>
      <%     return;
           }
      %>
      <%   if (item.type === 'tag') { %>
      <li><a href="<%- url_for(config.tag_dir + '/') %>" class="fa-biao"><%= _p('tags') %></a></li>
      <%     return;
           }
      %>
      <%   if (item.type === 'custom') { %>
      <li><a href="<%- url_for(item.path + '/') %>" class="<%- item.icon %>"><%= item.title %></a></li>
      <%     return;
           }
      %>
      <%   throw new Error('unknown type of theme.nav: ' + item.type); %>
      <% }); %>
    </ol>
  </nav>
  <aside>
    <% theme.sidebar.widgets.forEach(name => { %>
    <%   if (! name) return; %>
    <%-  partial('_widget/' + '000', {title: _p(name)}, {only: true}) %>
    <% }); %>
  </aside>
  <footer>
    <p>Copyright (C) 2017, <%= config.author %></p>
  </footer>
</body></html>
